tenant:
  name: minio

  image:
    repository: quay.io/minio/minio
    tag: RELEASE.2025-04-03T14-56-28Z
    pullPolicy: IfNotPresent

  configSecret:
    name: minio-env-configuration
    accessKey: minio
    secretKey: minio123

  pools:
    - name: pool-0
      servers: 1
      volumesPerServer: 1
      size: 10Gi
      storageClassname: standard
      resources:
        requests:
          memory: "512Mi"
          cpu: "250m"
        limits:
          memory: "1Gi"
          cpu: "500m"
      securityContext:
        runAsUser: 1000
        runAsGroup: 1000
        fsGroup: 1000
        fsGroupChangePolicy: "OnRootMismatch"
        runAsNonRoot: true
      containerSecurityContext:
        runAsUser: 1000
        runAsGroup: 1000
        runAsNonRoot: true
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
        seccompProfile:
          type: RuntimeDefault

  mountPath: /export
  subPath: /data

  buckets:
    - name: referti-clinica

  metrics:
    enabled: true
    port: 9000
    protocol: http

  certificate:
    # Assumiamo che i certificati siano gi√† creati nei secrets minio-api-tls e minio-console-tls
    externalCertSecret:
      - name: myminio-tls
        type: kubernetes.io/tls

  ingress:
    api:
      enabled: true
      ingressClassName: "nginx"
      annotations:
        cert-manager.io/cluster-issuer: selfsigned-root
        nginx.ingress.kubernetes.io/ssl-redirect: "true"
      tls:
        - hosts: 
            - minio.local
          secretName: minio-api-tls
      host: minio.local
      path: /
      pathType: Prefix

    console:
      enabled: true
      ingressClassName: "nginx"
      annotations:
        cert-manager.io/cluster-issuer: selfsigned-root
        nginx.ingress.kubernetes.io/ssl-redirect: "true"
      tls:
        - hosts: 
            - minio-console.local
          secretName: minio-console-tls
      host: minio-console.local
      path: /
      pathType: Prefix
